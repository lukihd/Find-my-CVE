i=1

while [ $i -le 13 ]
do
  curl -s https://www.cvedetails.com/version-list/12113/30764/${i}/Nodejs-Node.js.html | grep -oP '(vulnerability-list/vendor).*(title="Vulnerabilities)' | grep -oP '(vulnerability).*(html)' >> test
  i=$((i+1));
done

echo "Links saved in test"

while read p; do
  f=`echo "$p" | awk -F"/" '{print $5}' | sed 's/-.*//'`
  v=`echo "$p" | awk -F"/" '{print $5}' | sed 's/\.html.*//'` | | sed 's/-Node.js-/:/'
  echo "<$v>" >> "$f"
  curl -s https://www.cvedetails.com/"$p" | pup 'div[id="searchresults"] json{}' | grep "text" | sed '/"text": "1"/,$!d' >> "$f"
done <test
